{% extends "layout.html" %}

{% block title %}
    Watch History
{% endblock %}

{% block main %}
    <table class="table table-sm">
        <thead>
            <tr>
                <th>Watch Date</th>
                <th>Movie Name</th>
                <th>Release Year</th>
                <th>Genre</th>
                <th>Director</th>
                <th>Language</th>
                <th>Box Office</th>
                <th>IMDb Rating</th>
                <th>Personal Rating</th>
                <th>Comments</th>
            </tr>
        </thead>
        <tbody>
            <!-- TODO: Loop through the database entries to display them in this table -->
            {% for trx in history %}
                <form action="/history" method="post">
                    <tr>
                        <td class="align-middle">{{ trx.date }}</td>
                        <input type="hidden" name="date" value="{{ trx.date }}" />
                        <td class="align-middle">{{ trx.movie_id }}</td>
                        <input type="hidden" name="movie_id" value="{{ trx.movie_id }}" />
                        <td class="align-middle">{{ trx.year }}</td>
                        <td class="align-middle">{{ trx.genre }}</td>
                        <td class="align-middle">{{ trx.director }}</td>
                        <td class="align-middle">{{ trx.language }}</td>
                        <td class="align-middle">{{ trx.boxoffice }}</td>
                        <td class="align-middle">{{ trx.imdb_rating }}</td>
                        <td class="align-middle">{{ trx.personal_rating }}</td>
                        <td class="align-middle">{{ trx.comments }}</td>
                        <td class="align-middle">
                            <button class="btn btn-dark btn-sm" name="delete" type="submit">Delete</button>
                        </td>
                    </tr>
                </form>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
